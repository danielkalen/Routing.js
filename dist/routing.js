(function(t){if(t=function(r,e,n){return function(i){if(!e[i])throw Error(i+" is not a module");return r[i]?r[i].exports:(r[i]={exports:{}},r[i].exports=e[i].call(n,t,r[i],r[i].exports))}}({},{0:function(t,r,e){var n=t(1),i=t(2);return t=new function(){var t=[],r=[],e=!1,o=0,s=function(t){var e,n=i.currentPath();t=[];var o=0;for(e=r.length;o<e;o++){var s=r[o];if(!s._bp||s._bp.test(n)){var u=i.rB(n,s._bp);(s=s._M(u))&&(s.constructor===Array?t.push.apply(t,s):t.push(s))}}if(!t.length)for(o=0,e=r.length;o<e;o++)(s=r[o])._F&&(!s._bp||s._bp.test(n))&&t.push(s._F);var h=Math.max.apply(Math,t.map(function(t){return t.router._p}));for(s=0,o=(t=t.filter(function(t){return t.router._p===h})).length;s<o;s++)(e=t[s]).router.current.path!==n&&e.router._go(e,n,!0,"hashchange")};return this._registerRouter=function(t,n){var o;if(r.push(t),e||(e=!0,void 0!==window.onhashchange&&(!document.documentMode||8<=document.documentMode)?window.addEventListener("hashchange",s):setInterval(s,100)),n){var u=i.currentPath();if("string"==typeof n&&(o=i.cP(n)),(!t._bp||t._bp.test(u)||o)&&(!(n=t._M(i.rB(u,t._bp)))&&o&&(n=t._M(o),u=o),null==n&&(n=t._F),n))return t._go(n,u,!0)}},this.killAll=function(){var e,n=t.slice(),i=0;for(e=n.length;i<e;i++)n[i].kill();t.length=0,r.length=0},this.Router=function(r){return r&&"object"!=typeof r&&(r={timeout:r}),t.push(r=new n(r||{},++o)),r},this.version="1.1.3",this},r.exports=t,r.exports},4:function(t,r,e){var n=t(5),i=t(2);return r.exports=function(){function c(t,r,e,o){this.path=t,this.segments=r,this.router=e,this._ip=o,this._ct=new n(this),this.eA=this._LAction=i.noop,this._As=[]}return c.prototype.entering=function(t){return this.eA=t,this},c.prototype.leaving=function(t){return this._LAction=t,this},c.prototype.to=function(t){return this._As.push(t),this},c.prototype.filters=function(t){return this._d=t,this},c.prototype.passive=function(){return this._ip?this:(this._pv||(this._pv=new c(this.path,this.segments,this.router,!0),this.router._hp=!0),this._pv)},c.prototype.remove=function(){return this.router._removeRoute(this)},c.prototype._invokeAction=function(t,r,e){return(t=t.call(this._ct,r,e))===this.router._P?null:t},c.prototype._R=function(t,r,e){return this._a=!0,this._ct.params=this._RP(t),this._ct.query=i.parseQuery(t,this.router.settings.queryParser),Promise.resolve(this._invokeAction(this.eA,e,r)).then(function(t){return function(){return Promise.all(t._As.map(function(n){return t._invokeAction(n,e,r)}))}}(this))},c.prototype._L=function(t,r){if(this._a)return this._a=!1,this._invokeAction(this._LAction,r,t)},c.prototype._RP=function(t){var r;if(!this.segments.dynamic)return i.noopObj;var e=(t=i.removeQuery(i.rB(t,this.router._bp))).split("/");t={};var n=this.segments.dynamic;for(r in n){var o=n[r];"length"!==r&&(t[o]=e[r]||"")}return t},c.prototype.matchesPath=function(t){var r,e,n;if((r=this.path.test(t))&&this.segments.dynamic&&this._d){n||(n=t.split("/"));var i=t=0;for(e=n.length;t<e;i=++t){var o=n[i];if(o!==this.segments[i]&&(i=this.segments.dynamic[i],(r=null!=i)&&this._d[i]&&(r=this._d[i](o))),!r)break}}return r},Object.defineProperties(c.prototype,{map:{get:function(){return this.router.map.bind(this.router)}},mapOnce:{get:function(){return this.router.mapOnce.bind(this.router)}},listen:{get:function(){return this.router.listen.bind(this.router)}}}),c}(),r.exports},1:function(t,r,e){var n=t(4),i=t(2);return e=function(){function c(t,r){this.settings=t,this.ID=r,isNaN(this.settings.timeout)&&(this.settings.timeout=2500),this.listening=!1,this.routes=[],this._p=1,this._r={},this._c={},this._h=[],this._f=[],this._gB=this._gA=i.noop,this._P=Promise.resolve(),this._aR=[],this.current=this.prev={route:null,path:null}}return c.prototype._A=function(t){return this.routes.push(t),this.routes.sort(function(t,r){var e,n,i=t.segments.length-r.segments.length;return i||(t=(null!=(e=t.segments.dynamic)?e.length:void 0)||0,r=(null!=(n=r.segments.dynamic)?n.length:void 0)||0,i=t-r),i}),t},c.prototype._removeRoute=function(t){var r=Object.keys(this._c);Object.keys(this._r);var e=r.filter(function(r){return function(e){return r._c[e]===t}}(this))[0];r=r.filter(function(r){return function(e){return r._r[e]===t}}(this))[0],i.rI(this.routes,t),delete this._c[e],delete this._r[r]},c.prototype._M=function(t){var r,e;t=i.removeQuery(t)||"/";var n=this._c[t];if(!n){var o=this.routes,s=0;for(r=o.length;s<r;s++){var u=o[s];if(u.matchesPath(t)){if(!this._hp){n=u;break}if(u._pv&&(e||(e=[]),e.push(u._pv),0===u._As.length))continue;n||(n=u)}}}if(e&&(n&&e.push(n),n=e),n)return this._c[t]=n},c.prototype._go=function(t,r,e,n,o){if(o||(o=this._aR.slice(),this._aR.length=0),t.constructor===Array)return Promise.all(t.map(function(t){return function(i){return t._go(i,r,e,n,o)}}(this)));if(r=i.aB(r,this._bp),e&&!t._ip){var s=i.currentPath();r!==s&&(window.location.hash=r),"redirect"===n&&(this.current=this.prev,this._h.pop()),this.current.route&&"back"!==n&&this._h.push(this.current),n&&"hashchange"!==n||(this._f.length=0),this.prev=i.cO(this.current),this.current={route:t,path:r}}return this._P=this._P.then(function(e){return function(){return new Promise(function(n,s){t===e._F||i.includes(e._aR,t)||e._aR.push(t);var u=o.slice();return o.length=0,setTimeout(function(){return s(Error("TimeoutError: '"+r+"' failed to load within "+e.settings.timeout+"ms (Router #"+e.ID+")"))},e.settings.timeout),Promise.resolve().then(e._gB).then(function(){return Promise.all(u.map(function(t){return t._L(e.current.route,e.current.path)}))}).then(function(){return t._R(r,e.prev.route,e.prev.path)}).then(e._gA).then(n).catch(s)})}}(this)),this._P.catch(function(r){return function(e){return i.lE(e),i.rI(r._aR,t),r._P=Promise.resolve(),r._F?r._go(r._F,r.current.path):r._go(r.prev.route,r.prev.path,!0,"back")}}(this))},c.prototype.go=function(t,r){if("string"==typeof t){var e=i.cP(t);e=i.rB(e,this._bp),(t=this._M(e))||(t=this._F),t&&e!==this.current.path&&this._go(t,e,!0,r)}return this._P},c.prototype.setQuery=function(t){t=i.sQ(t,this.settings.querySerializer);var r=i.removeQuery(i.currentPath())||"/";return window.location.hash=r+"?"+t},c.prototype.map=function(t){t=i.cP(t);var r=i.pP(t),e=this._r[t];return e||(e=i.sRE(r,t),e=this._r[t]=new n(e,r,this),this._A(e)),e},c.prototype.mapOnce=function(t){return this.map(t).to(function(){return this.remove()})},c.prototype.listen=function(r){return null==r&&(r=!0),this.listening=!0,t(0)._registerRouter(this,r),this},c.prototype.beforeAll=function(t){return this._gB=t,this},c.prototype.afterAll=function(t){return this._gA=t,this},c.prototype.base=function(t){return this._bp=i.pRE(i.cP(t),!0,t),this},c.prototype.priority=function(t){return t&&"number"==typeof t&&(this._p=t),this},c.prototype.fallback=function(t){return this._F=new n("*FALLBACK*",[],this),this._F.to(t),this},c.prototype.back=function(){var t;return this.current.route&&this._f.unshift(this.current),(t=this._h.pop())?this._go(t.route,t.path,!0,"back"):Promise.resolve()},c.prototype.forward=function(){var t;return(t=this._f.shift())?this._go(t.route,t.path,!0,"forward"):Promise.resolve()},c.prototype.refresh=function(){return this.current.route&&(this.prev.path=this.current.path,this.prev.route=this.current.route,this._go(this.current.route,this.current.path)),this._P},c.prototype.kill=function(){this._r={},this._c={},this.routes.length=this._h.length=this._f.length=0,this._gB=this._gA=i.noop,this._F=null,this.current.route=this.current.path=this.prev.route=this.prev.path=null},c}(),r.exports=e,r.exports},5:function(t,r,e){return r.exports=function(){function a(t){this.route=t,this.segments=this.route.segments,this.path=this.route.path.string,this.params={},this.query={}}return a.prototype.remove=function(){return this.route.remove()},a.prototype.redirect=function(t){return this.route.router.go(t,"redirect"),Promise.resolve()},a}(),r.exports},2:function(t,r,e){return e.noopObj={},e.noop=function(){return Promise.resolve()},e.currentPath=function(){return e.cP(window.location.hash)},e.removeQuery=function(t){return t.split("?")[0]},e.parseQuery=function(t,r){var n,i;if(n=t.split("?").slice(1).join("?")){t={};var o=(n=decodeURIComponent(n)).split("&");for(n=0,i=o.length;n<i;n++){var s=o[n],u=s.split("=");s=u[0],"{"!==(u=u[1])[0]&&"["!==u[0]||"}"!==u[u.length-1]&&"]"!==u[u.length-1]?r&&(u=r(s,u)):u=JSON.parse(u,r),t[s]=u}return t}return e.noopObj},e.serializeQuery=function(t,r){var e,n="",i=Object.keys(t),o=0;for(e=i.length;o<e;o++){var s=i[o],u=t[s];n&&(n+="&"),n+=s+"=",u&&"object"==typeof u?'"'===(u=JSON.stringify(u,r))[0]&&'"'===u[u.length-1]&&(u=u.slice(1,-1)):r&&(u=r(s,u)),n+=encodeURIComponent(u)}return n},e.cO=function(t){var r,e={};for(r in t){var n=t[r];e[r]=n}return e},e.includes=function(t,r){return-1!==t.indexOf(r)},e.rI=function(t,r){return r=t.indexOf(r),t.splice(r,1),t},e.lE=function(t){t instanceof Error||(t=Error(t)),null!=("undefined"!=typeof console&&null!==console?console.error:void 0)?console.error(t):null!=("undefined"!=typeof console&&null!==console?console.log:void 0)&&console.log(t)},e.aB=function(t,r){return r&&!r.test(t)?r.string+"/"+t:t},e.rB=function(t,r){return r&&r.test(t)&&((t=t.slice(r.length+1)).length&&"?"!==t[0]||(t="/"+t)),t},e.cP=function(t){return"#"===t[0]&&(t=t.slice(1)),0===t.length||"?"===t[0]?t="/"+t:1<t.length&&("/"===t[0]&&(t=t.slice(1)),"/"===t[t.length-1]&&(t=t.slice(0,-1))),t},e.pP=function(t){var r,e,n;if("/"===t)return["/"];var i=n=!1,o="",s=[],u=t.length,h=-1;for(r=function(){s.push(o);var t=s.length-1;return i&&(null==s.optional&&(s.optional={}),null==s.dynamic&&(s.dynamic={length:0}),s.dynamic[t]=o),n&&(s.optional[t]=o),o="",i=n=!1};++h!==u;)switch(e=t[h]){case"/":r();break;case":":i=!0;break;case"?":n=!0;break;default:o+=e}return r(),s},e.pRE=function(t,r,e){t.replace(/\//g,"\\/");var n="^"+t;return r||(n+="$"),n=new RegExp(n),n.original=e,n.string=t,n.length=t.length,n},e.sRE=function(t,r){var n,i,o,s="",u=n=0;for(i=t.length;n<i;u=++n){var h=t[u];null!=(o=t.dynamic)&&o[u]?(h="[^/]+",1===t.length&&(h+="$"),s&&(h="/"+h),t.optional[u]&&(h="(?:"+h+")?")):s&&(s+="/"),s+=h}return e.pRE(s,!1,r)},r.exports}},this),"function"==typeof define&&define.umd)define(function(){return t(0)});else{if("object"!=typeof module||!module.exports)return this.Routing=t(0);module.exports=t(0)}}).call(this,null);